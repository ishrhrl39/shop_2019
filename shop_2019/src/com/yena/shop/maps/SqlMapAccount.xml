<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="SqlMapAccount">
	<typeAlias alias="user" type="com.yena.shop.model.User" />	
	
	<!-- 회원가입  -->
	<insert id="insertUser" parameterClass="user">
		INSERT INTO USER
			(ID
			,PASS_WD
			,NAME
			,EMAIL
			,BIRTH
			,GENDER
			,TEL
			,ADULT_YN
			,REG_DTM
			,UPD_DTM
			,USE_YN) 
			VALUES
			(
				#id#,      
				#pass_wd#, 
				#name#,    
				#email#,   
				#birth#,   
				#gender#,  
				#tel#,     
				#adult_yn#,
				#reg_dtm#, 
				#upd_dtm#, 
				#use_yn#
			)		
	</insert>
	
	<!-- 아이디 중복체크  -->
	<select id="duplCheckId" parameterClass="java.lang.String" resultClass="int">
		SELECT COUNT(ID) AS CNT FROM USER WHERE ID = #id#
	</select>	
	
	<!-- 회원 목록 조회 -->
	<select id="selectUser" parameterClass="map" resultClass="user">
		SELECT
			ID
			,PASS_WD
			,NAME
			,EMAIL
			,BIRTH
			,GENDER
			,TEL
			,ADULT_YN
			,REG_DTM
			,UPD_DTM
			,USE_YN
		FROM USER
			WHERE 1=1
			<isNotNull property="LIMIT">
				LIMIT #LIMIT#
			</isNotNull>
			<isNotNull property="OFFSET">
				OFFSET #OFFSET#
			</isNotNull>
			
	</select>
	
	<!-- 회원 전체 개수 조회 -->
	<select id="selectTotalUserCount" resultClass="int">
		SELECT COUNT(*) AS CNT FROM USER 
	</select>
</sqlMap>